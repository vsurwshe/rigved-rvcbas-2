<div id="page-loading" [hidden]="!loading">
    <div class="loader">
        <img src="assets/img/giphy.gif" width="100" height="100" style="padding: 0">
    </div>
</div>
<div class="col-md-12 table-responsive header-board">
    <div class="tab">
        <button id="defaultOpen" class="tablinks" (click)="openTab($event, 'UpcomingRides')">Upcoming Rides</button>
        <button class="tablinks" (click)="openTab($event, 'PastRides')">Past Rides</button>
        <button class="button-add" (click)="goToAddTrip()" > ADD TRIP</button>
    </div>
    <div id="UpcomingRides" class="tabcontent">
        <div class="col-sm-12">
            <table id="upComeingDataTable" class="display" style="width: 100%;"></table>
        </div>
    </div>
    <div id="PastRides" class="tabcontent">
        <div class="col-sm-12">
            <table id="pastRidesDataTable" class="display" style="width: 100%;"></table>
        </div>
    </div>
</div>
<!-- Model Code -->
<div class="modal" tabindex="-1" role="dialog" id="exampleModal">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Ride Details -View</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-4">
                        <label><h6>Company:</h6></label>
                        <label>&nbsp;{{ridesDetails?.companyDetailDto?.companyName}}</label>
                    </div>
                    <div class="col-md-2">
                        <label><h6>Travel Id:</h6></label>
                        <label>&nbsp;{{ridesDetails?.travelId}}</label>
                    </div>
                    <div class="col-md-2">
                        <label> <h6>Date:</h6></label>
                        <label>&nbsp;{{ridesDetails?.bookingDate}}</label>
                    </div>
                    <div class="col-md-2">
                        <label><h6>Time:</h6></label>
                        <label>&nbsp;{{ridesDetails?.bookingTime}}</label>
                    </div>
                </div>
                <hr>
                <div class="row">
                    <div class="col-md-6">
                        <h6>Traveller Details</h6>
                        <div class="col-md-3">
                            <img class="img" src="assets/img/dummy.png" alt="img">
                        </div>
                        <div class="col-md-9 element">
                            <label><h6>Name :</h6></label>
                            <label>&nbsp;&nbsp;{{ridesDetails?.travelerDetailDto?.firstName}}{{ridesDetails?.travelerDetailDto?.lastName}}</label><br>
                            <label><h6>Mobile Number :</h6></label>
                            <label>&nbsp;&nbsp;{{ridesDetails?.travelerDetailDto?.mobileNumber}}</label><br>
                            <label><h6>Employee Id :</h6></label>
                            <label>{{ridesDetails?.travelerDetailDto?.employeeId}}</label><br>
                        </div>
                        <hr>
                        <label><h6>Vehicle segment/type :</h6></label>
                        <label>&nbsp;&nbsp;{{ridesDetails?.sysCarCategoryDto?.name}}</label><br>
                        <label><h6>Travel Date :</h6></label>
                        <label>&nbsp;&nbsp;{{ridesDetails?.pickUpDate}}</label><br>
                        <label><h6>Pick-up city :</h6></label>
                        <label>&nbsp;&nbsp;{{ridesDetails?.pickUpCity}}</label><br>
                        <label><h6>Pick-up location :</h6></label>
                        <label>&nbsp;&nbsp;{{ridesDetails?.pickUpLocation}}</label><br>
                        <label><h6>pick-up address :</h6></label>
                        <label>&nbsp;&nbsp;{{ridesDetails?.pickUpAddress}}</label><br>
                    </div>
                    <div class="col-md-6">
                        <h6>Driver Details</h6>
                        <div class="col-md-3">
                            <img class="img" src="assets/img/dummy.png" alt="img">
                        </div>
                        <div class="col-md-9 element">
                            <label><h6>Driver Name :</h6></label> 
                            <label>&nbsp;&nbsp;{{ridesDetails?.driverDetailDto?.firstName}}&nbsp;{{ridesDetails?.driverDetailDto?.lastName}}</label><br>
                            <label><h6> Driver Mobile Number :</h6></label>
                            <label>&nbsp;&nbsp;{{ridesDetails?.driverDetailDto?.mobileNumber}}</label><br>
                            <label><h6>Brand/modal :</h6></label>
                            <label>&nbsp;&nbsp;{{ridesDetails?.sysCarCategoryDto?.name}}</label><br>
                        </div>
                        <hr>
                        <label><h6>Type of request :</h6></label>
                        <label> &nbsp;&nbsp;{{ridesDetails?.sysBookingRequestTypeDto?.name}}</label><br>
                        <label><h6>Pick-up Time :</h6></label>
                        <label>&nbsp;&nbsp;{{ridesDetails?.pickUpTime}}</label><br>
                        <label><h6>Release Time :</h6></label>
                        <label>&nbsp;&nbsp;{{ridesDetails?.dropTime}}</label><br>
                        <label><h6>Release location :</h6></label>
                        <label>&nbsp;&nbsp;{{ridesDetails?.releaseLocation}}</label><br>
                        <label><h6>Release address :</h6></label>
                        <label>&nbsp;&nbsp;{{ridesDetails?.releaseAddress}}</label><br>
                    </div>
                </div>
                <hr>
                <div class="text-center" [hidden]="!view">
                    <label>Current Ride Status</label><br>
                    <button class="btn btn-defualt">
                        <h2>{{ridesDetails?.changedStatus}}</h2>
                    </button>
                </div>
                <div class="text-center" style="padding-top: 10px;" [hidden]="!feedback">
                    <button class="btn btn-defualt" (click)="viewTripDetails(ridesDetails)" data-toggle="modal" data-target="#tripDetailsModel" >View Trip Details</button>
                    <button class="btn btn-defualt" (click)="viewFeedback(ridesDetails)" data-toggle="modal" data-target="#feedbackModel" >View Feedback</button> 
                </div>
                <div class="text-center" [hidden]="!accept">
                    <label>Current Ride Status</label><br>
                    <button class="btn btn-success" ng-click="acceptRide(ridesDetails)">
                        <h2 style="color: #fff;">Accept</h2>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal" tabindex="-1" role="dialog" id="exampleModal1">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Reassign Trip</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-6">
                        <h6>Traveller Details</h6>
                        <div class="col-md-3">
                            <img class="img" src="assets/img/dummy.png" alt="img">
                        </div>
                        <div class="col-md-9 element">
                            <label><h6>Name :</h6></label>
                            <label>&nbsp;&nbsp;{{ridesDetails?.travelerDetailDto?.firstName}}&nbsp;{{ridesDetails?.travelerDetailDto?.lastName}}</label><br>
                            <label><h6>Mobile Number :</h6></label>
                            <label>&nbsp;&nbsp;{{ridesDetails?.travelerDetailDto?.mobileNumber}}</label><br>
                            <label><h6>Employee Id :</h6></label>
                            <label>{{ridesDetails?.travelerDetailDto?.employeeId}}</label><br>
                        </div>
                        <hr>
                        <label><h6>Vehicle segment/type :</h6></label>
                        <label>&nbsp;&nbsp;{{ridesDetails?.sysCarCategoryDto?.name}}</label><br>
                        <label><h6>Travel Date :</h6></label>
                        <label>&nbsp;&nbsp;{{ridesDetails?.pickUpDate}}</label><br>
                        <label><h6>Pick-up city :</h6></label>
                        <label>&nbsp;&nbsp;{{ridesDetails?.pickUpCity}}</label><br>
                        <label><h6>Pick-up location :</h6></label>
                        <label>&nbsp;&nbsp;{{ridesDetails?.pickUpLocation}}</label><br>
                        <label><h6>pick-up address :</h6></label>
                        <label>&nbsp;&nbsp;{{ridesDetails?.pickUpAddress}}</label><br>
                    </div>
                    <div class="col-md-6">
                        <h6>Driver Details</h6>
                        <div class="col-md-3">
                            <img class="img" src="assets/img/dummy.png" alt="img">
                        </div>
                        <div class="col-md-9 element">
                            <label> <h6>Driver Name :</h6> </label> 
                            <label>&nbsp;&nbsp;{{ridesDetails?.travelerDetailDto?.firstName}}&nbsp;{{ridesDetails?.travelerDetailDto?.lastName}}</label><br>
                            <label><h6> Driver Mobile Number :</h6></label>
                            <label>&nbsp;&nbsp;{{ridesDetails?.travelerDetailDto?.mobileNumber}}</label><br>
                            <label><h6>Brand/modal :</h6></label>
                            <label>&nbsp;&nbsp;{{ridesDetails?.sysCarCategoryDto?.name}}</label><br>
                        </div>
                        <hr>
                        <label><h6>Type of request :</h6> </label>
                        <label> &nbsp;&nbsp;{{ridesDetails?.sysBookingRequestTypeDto?.name}}</label><br>
                        <label> <h6>Pick-up Time :</h6> </label>
                        <label>&nbsp;&nbsp;{{ridesDetails?.pickUpTime}}</label><br>
                        <label><h6>Release Time :</h6></label>
                        <label>&nbsp;&nbsp;{{ridesDetails?.dropTime}}</label><br>
                        <label> <h6>Release location :</h6></label>
                        <label>&nbsp;&nbsp;{{ridesDetails?.releaseLocation}}</label><br>
                        <label><h6>Release address :</h6></label>
                        <label>&nbsp;&nbsp;{{ridesDetails?.releaseAddress}}</label><br>
                    </div>
                </div>
                <hr>
                <div class="col-md-12 text-right">
                    <h4 class="mt-2 mb-2">Assign Ride</h4>
                    <ul style="right: 50%;display:inline-flex;">
                        <li>
                            <label class="switch">
                                <input type="checkbox" checked ng-model="online" (click)="ToggleOnline(online)">
                                <span class="slider round"></span>
                            </label>
                        </li>
                        <li class="online-status myfont" [hidden]="online" ng-show="online">
                            <span> Auto</span>
                        </li>
                        <li class="offline-status myfont" [hidden]="!online">
                            <span> Manual</span>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="from-group select col-sm-6" [hidden]="online">
                <!-- <lable for="">Select a Driver</lable>
                <input class="form-control txt-field " placeholder="Enter For Use" ng-model="driver"
                    uib-typeahead="company as company.name for company in getDriverList($viewValue)"
                    typeahead-loading="loadingLocations" typeahead-show-hint="false" typeahead-min-length="0"
                    typeahead-no-results="noResults" class="form-control" ng-focus=getDriverList()>
                <i ng-show="loadingLocations" class="glyphicon glyphicon-refresh"></i>
                <div ng-show="noResults">
                    <i class="glyphicon glyphicon-remove"></i> No Results Found
                </div> -->
            </div>
            <div class="col-sm-12" style="margin-top: 10px;position: relative;bottom: 15px;">
                <!-- <center> -->
                    <button type="button" class="button btn-block" (click)="reAssignRide(ridesDetails)">Assign Ride</button>
                <!-- </center> -->
            </div>
        </div>
    </div>
</div>